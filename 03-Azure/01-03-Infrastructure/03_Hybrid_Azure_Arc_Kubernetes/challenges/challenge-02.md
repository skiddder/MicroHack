## Challenge 2 - Enable Azure Monitor for Containers

In this challenge, youâ€™ll configure the core monitoring and governance capabilities that turn an Arcâ€‘enabled k8s cluster into an enterpriseâ€‘ready platform. 
* Azure Monitor Container Insights provides realâ€‘time visibility into cluster health, performance, and workload behavior, while
* Microsoft Defender for Kubernetes adds runtime threat detection and security hardening to protect your applications and infrastructure. 
* Azure Policy for Kubernetes ensures consistent governance by enforcing configuration and compliance standards across the cluster.

All telemetry, logs, and security signals generated by these services flow into Log Analytics, which serves as the central, scalable persistence layer for querying, alerting, and correlating operational and security data.

ðŸ’¡*Hint*: There is a [Monitoring microhack](../07_Azure_Monitor/README.md) which guides you on how to create alerts, dashboards and workbooks to operationalize your monitoring experience.

ðŸ’¡*Hint*: In this microhack we are focusing on infrastructure monitoring. But you easily can add application monitoring using either [Application Insights](https://learn.microsoft.com/en-us/azure/azure-monitor/app/app-insights-overview) or [Azure Managed Prometheus](https://learn.microsoft.com/en-us/azure/azure-monitor/metrics/prometheus-metrics-overview) for workloads running in your k8s cluster.

### Goal
* Establish foundational monitoring, security, and governance for an Arcâ€‘enabled Kubernetes cluster

### Actions
* Create a Log Analytics workspace as centralized storage for all logs and metrics.
* Enable Azure Monitor â€“ Container Insights via the Arc extension to collect cluster, node, pod, and container telemetry.
* Onboard the cluster to Microsoft Defender for Kubernetes to activate runtime threat detection and security posture management.
* Assign Azure Policy for Kubernetes to enforce governance rules and ensure consistent configuration and compliance across the cluster.

### Success Criteria
* In the Azure portal navigate to your arc-enabled k8s cluster. Under Monitoring > Insights you can see node performance etc, workload status and container logs
* Defender for Kubernetes displays active security assessments, no onboarding errors, and visible recommendations and alerts.
* Azure Policy shows evaluated policy results with compliant/nonâ€‘compliant resources and enforcement functioning as expected.
* Telemetry from all components is visible and queryable in Log Analytics, confirming correct data ingestion and workspace linkage.

### Learning Resources
* https://learn.microsoft.com/en-us/azure/azure-monitor/containers/kubernetes-monitoring-overview
* https://learn.microsoft.com/en-us/azure/azure-monitor/containers/kubernetes-monitoring-enable-arc
* https://learn.microsoft.com/en-us/azure/defender-for-cloud/defender-for-containers-arc-enable-programmatically

### Solution - Spoilerwarning
[Solution Steps](../walkthroughs/challenge-02/solution.md)

[Next challenge](challenge-03.md) | [Back](../Readme.md)